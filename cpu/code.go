package cpu

var opcodeCycles = []int{
	// 0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
	1, 3, 2, 2, 1, 1, 2, 1, 5, 2, 2, 2, 1, 1, 2, 1, // 0
	1, 3, 2, 2, 1, 1, 2, 1, 3, 2, 2, 2, 1, 1, 2, 1, // 1
	2, 3, 2, 2, 1, 1, 2, 1, 2, 2, 2, 2, 1, 1, 2, 1, // 2
	2, 3, 2, 2, 3, 3, 3, 1, 2, 2, 2, 2, 1, 1, 2, 1, // 3
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // 4
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // 5
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // 6
	2, 2, 2, 2, 2, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2, 1, // 7
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // 8
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // 9
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // a
	1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, // b
	2, 3, 3, 4, 3, 4, 2, 4, 2, 4, 3, 2, 3, 6, 2, 4, // c
	2, 3, 3, 1, 3, 4, 2, 4, 2, 4, 3, 1, 3, 1, 2, 4, // d
	3, 3, 2, 1, 1, 4, 2, 4, 4, 1, 4, 1, 1, 1, 2, 4, // e
	3, 3, 2, 1, 1, 4, 2, 4, 3, 2, 4, 1, 0, 1, 2, 4, // f
}

func operandLength(inst opcode) int {
	return operandLengthArray[inst]
}

var operandLengthArray = []int{
	// 0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
	0, 2, 0, 0, 0, 0, 1, 0, 2, 0, 0, 0, 0, 0, 1, 0, // 0
	1, 2, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, // 1
	1, 2, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, // 2
	1, 2, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, // 3
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 4
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 5
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 6
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 7
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 8
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 9
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // a
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // b
	0, 0, 2, 2, 2, 0, 1, 0, 0, 0, 2, 0, 2, 2, 1, 0, // c
	0, 0, 2, -1, 2, 0, 1, 0, 0, 0, 2, -1, 2, -1, 1, 0, // d
	1, 0, 1, -1, -1, 0, 1, 0, 1, 0, 2, -1, -1, -1, 1, 0, // e
	1, 0, 1, 0, -1, 0, 1, 0, 1, 0, 2, 0, -1, -1, 1, 0, // f
}

// Z N H C
// -1: empty
// 0: clear flag
// 1: set flag
// 2: affected
// 3: not affected
var affectedFlagsArray [][4]int = [][4]int{
	// 0x00 - 0x0F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {0, 0, 0, 2},
	{3, 3, 3, 3}, {3, 0, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {0, 0, 0, 2},

	// 0x10 - 0x1F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {0, 0, 0, 2},
	{3, 3, 3, 3}, {3, 0, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {0, 0, 0, 2},

	// 0x20 - 0x2F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {2, 3, 0, 2},
	{3, 3, 3, 3}, {3, 0, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {3, 1, 1, 3},

	// 0x30 - 0x3F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {3, 0, 0, 1},
	{3, 3, 3, 3}, {3, 0, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{2, 0, 2, 3}, {2, 1, 2, 3}, {3, 3, 3, 3}, {3, 0, 0, 3},

	// 0x40 - 0x4F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},

	// 0x50 - 0x5F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},

	// 0x60 - 0x6F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},

	// 0x70 - 0x7F
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},

	// 0x80 - 0x8F
	{2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2},
	{2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2},
	{2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2},
	{2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2}, {2, 0, 2, 2},

	// 0x90 - 0x9F
	{2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2},
	{2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2},
	{2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2},
	{2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2},

	// 0xA0 - 0xAF
	{2, 0, 1, 0}, {2, 0, 1, 0}, {2, 0, 1, 0}, {2, 0, 1, 0},
	{2, 0, 1, 0}, {2, 0, 1, 0}, {2, 0, 1, 0}, {2, 0, 1, 0},
	{2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0},
	{2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0},

	// 0xB0 - 0xBF
	{2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0},
	{2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0}, {2, 0, 0, 0},
	{2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2},
	{2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2}, {2, 1, 2, 2},

	// 0xC0 - 0xCF
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {2, 0, 2, 2}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {2, 0, 2, 2}, {3, 3, 3, 3},

	// 0xD0 - 0xDF
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {-1, -1, -1, -1},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {2, 1, 2, 2}, {3, 3, 3, 3},
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {-1, -1, -1, -1},
	{3, 3, 3, 3}, {-1, -1, -1, -1}, {2, 1, 2, 2}, {3, 3, 3, 3},

	// 0xE0 - 0xEF
	{3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3}, {-1, -1, -1, -1},
	{-1, -1, -1, -1}, {3, 3, 3, 3}, {2, 0, 1, 0}, {3, 3, 3, 3},
	{0, 0, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3}, {-1, -1, -1, -1},
	{-1, -1, -1, -1}, {-1, -1, -1, -1}, {2, 0, 0, 0}, {3, 3, 3, 3},

	// 0xF0 - 0xFF
	{3, 3, 3, 3}, {2, 2, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{-1, -1, -1, -1}, {3, 3, 3, 3}, {2, 0, 0, 0}, {3, 3, 3, 3},
	{0, 0, 2, 2}, {3, 3, 3, 3}, {3, 3, 3, 3}, {3, 3, 3, 3},
	{-1, -1, -1, -1}, {-1, -1, -1, -1}, {2, 1, 2, 2}, {3, 3, 3, 3},
}
